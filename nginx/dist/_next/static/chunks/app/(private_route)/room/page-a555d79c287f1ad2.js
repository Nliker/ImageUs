(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5439],{3922:function(e,t,r){Promise.resolve().then(r.bind(r,9983))},9983:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var o=r(7311),n=r(2265),i=r(4033),a=r(4606),s=r(8067),l=r(3787),d=r(1172),c=r(3159),m=r(1678),u=r(4616),f=r(8760);function g(e){let{roomId:t}=e,{exitRoom:r}=(0,f.N)();return(0,o.tZ)(u.Z,{id:t,icon:(0,o.tZ)(m.T$9,{}),title:"주의!",content:"정말 방에서 나가시겠습니까?",okHandler:()=>r(t)})}function p(e){let{roomData:t,index:r}=e,a=(0,i.useRouter)(),[s,l]=(0,n.useState)(!1),m=(0,n.useCallback)(e=>()=>{a.push("room/".concat(e))},[a]);return(0,o.tZ)(h,{accessBoxHover:s,children:(0,o.BX)("div",{className:"card_body",children:[(0,o.tZ)("div",{className:"card_num",children:r}),(0,o.BX)("div",{className:"main_info",onClick:m(t.id),onMouseOver:()=>l(!0),onMouseLeave:()=>l(!1),children:[(0,o.tZ)("div",{className:"title",children:t.title}),(0,o.BX)("div",{children:[t.userlist.slice(0,3).map(e=>(0,o.tZ)("span",{className:"member",children:e.name},e.id)),"..."]})]}),(0,o.tZ)("div",{className:"btn_group",children:(0,o.BX)(d.Pd.Provider,{value:{size:"22px",color:"rgba(0, 0, 0, 0.45)"},children:[(0,o.tZ)(g,{roomId:t.id}),(0,o.tZ)("div",{className:"invite_icon",onClick:()=>a.push("room/".concat(t.id,"/invite_member")),children:(0,o.tZ)(c.Bj$,{})})]})})]})})}let h=(0,s.Z)("div",{target:"e1vq9lw40"})("\r\n    position:relative;width:250px;border:1px solid #b8b9c9;border-radius:8px;background:#fff;transition:box-shadow 0.2s,border-color 0.2s;",e=>{let{accessBoxHover:t}=e;return t?"border-color: transparent; box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.16), 0 3px 6px 0 rgba(0, 0, 0, 0.12), 0 5px 12px 4px rgba(0, 0, 0, 0.09);":""},"\r\n\r\n    .card_body{display:flex;align-items:center;height:90px;border-radius:8px;overflow:hidden;.card_num{width:30px;height:100%;line-height:90px;border-right:1px solid #f0f0f0;}.main_info{flex:1 0 auto;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;cursor:pointer;&:hover{background-color:#f8f8ff;}.title{margin-bottom:8px;font-weight:600;color:rgba(0,0,0,0.88);}.member{color:rgba(0,0,0,0.45);&:not(:last-child){margin-right:5px;}}}.btn_group{display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;width:50px;height:100%;border-left:1px solid #f0f0f0;.invite_icon{display:flex;justify-content:center;align-items:center;flex:1;width:100%;cursor:pointer;&:hover{background-color:#f0f0f0;}}}}");var b=r(6494),v=r(4271),x=r.n(v),_=r(1298);function w(){let[e,t]=(0,b.v$)(),{data:r,isLoading:s}=(0,f.N)(),d=(0,i.useRouter)();return((0,n.useEffect)(()=>{t(e=>({...e,currentPage:l.L.RoomMain,navigationTitle:"방 목록"}))},[t]),s||!r)?(0,o.tZ)(_.Z,{}):(0,o.BX)(k,{children:[(0,o.tZ)("div",{className:x().card_wrapper,children:0===r.length?(0,o.tZ)("div",{children:"등록된 방이 없습니다..."}):r.map((e,t)=>(0,o.tZ)(p,{roomData:e,index:t+1},e.id))}),(0,o.BX)(y,{onClick:()=>d.push("/room/create_room"),children:[(0,o.tZ)(a.O$v,{}),(0,o.tZ)("div",{children:"새로운 방 만들기"})]})]})}let k=(0,s.Z)("div",{target:"e1hok83u0"})("\r\n    display:flex;flex-direction:column;justify-content:space-between;align-items:center;min-height:100%;padding:50px;box-sizing:border-box;"),y=(0,s.Z)("div",{target:"e1hok83u1"})("\r\n    display:flex;flex-direction:column;align-items:center;justify-content:center;width:85%;max-width:800px;margin-top:3rem;gap:0.5rem;padding:1rem;box-sizing:border-box;user-select:none;cursor:pointer;border-radius:0.4rem;color:hsla(240,7%,70%,1);border:4px dashed hsla(240,7%,70%,0.35);&:hover{background-color:hsla(240,7%,70%,0.22);}svg{width:35px;height:35px;}")},1298:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var o=r(7311);r(2265);var n=r(8067);function i(){return(0,o.tZ)(a,{children:"Loading…"})}let a=(0,n.Z)("div",{target:"ega6p8c0"})('\r\n    position:fixed;z-index:999;height:2em;width:2em;overflow:visible;margin:auto;top:0;left:0;bottom:0;right:0;&:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.3);}&:not(:required){/* hide "loading..." text */\r\n        font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;}&:not(:required):after{content:"";display:block;font-size:10px;width:1em;height:1em;margin-top:-0.5em;-webkit-animation:spinner 1500ms infinite linear;-moz-animation:spinner 1500ms infinite linear;-ms-animation:spinner 1500ms infinite linear;-o-animation:spinner 1500ms infinite linear;animation:spinner 1500ms infinite linear;border-radius:0.5em;-webkit-box-shadow:rgba(0,0,0,0.75) 1.5em 0 0 0,rgba(0,0,0,0.75) 1.1em 1.1em 0 0,rgba(0,0,0,0.75) 0 1.5em 0 0,rgba(0,0,0,0.75) -1.1em 1.1em 0 0,rgba(0,0,0,0.5) -1.5em 0 0 0,rgba(0,0,0,0.5) -1.1em -1.1em 0 0,rgba(0,0,0,0.75) 0 -1.5em 0 0,rgba(0,0,0,0.75) 1.1em -1.1em 0 0;box-shadow:rgba(0,0,0,0.75) 1.5em 0 0 0,rgba(0,0,0,0.75) 1.1em 1.1em 0 0,rgba(0,0,0,0.75) 0 1.5em 0 0,rgba(0,0,0,0.75) -1.1em 1.1em 0 0,rgba(0,0,0,0.75) -1.5em 0 0 0,rgba(0,0,0,0.75) -1.1em -1.1em 0 0,rgba(0,0,0,0.75) 0 -1.5em 0 0,rgba(0,0,0,0.75) 1.1em -1.1em 0 0;}/* Animation */\r\n\r\n    @-webkit-keyframes spinner{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg);}}@-moz-keyframes spinner{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg);}}@-o-keyframes spinner{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg);}}@keyframes spinner{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg);}}')},4616:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var o=r(7311);r(2265);var n=r(8067);function i(e){let{id:t,icon:r,title:n,content:i,okHandler:s}=e;return(0,o.BX)(a,{idNum:t,children:[(0,o.tZ)("input",{id:"modal_toggle_".concat(t),type:"checkbox"}),(0,o.tZ)("label",{htmlFor:"modal_toggle_".concat(t),className:"label_icon",children:r}),(0,o.tZ)("label",{className:"modal_backdrop",htmlFor:"modal_toggle_".concat(t)}),(0,o.BX)("div",{className:"modal_content",children:[(0,o.tZ)("label",{className:"modal_close",htmlFor:"modal_toggle_".concat(t),children:"✕"}),(0,o.tZ)("h2",{children:n}),(0,o.tZ)("hr",{}),(0,o.tZ)("p",{className:"modal_content_text",children:i}),(0,o.tZ)("label",{className:"modal_content_btn ok_button",onClick:s,htmlFor:"modal_toggle_".concat(t),children:"확인"}),(0,o.tZ)("label",{className:"modal_content_btn",htmlFor:"modal_toggle_".concat(t),children:"취소"})]})]})}let a=(0,n.Z)("div",{target:"e9y1uwz0"})("\r\n    flex:1;display:flex;align-items:center;justify-content:center;width:100%;&:hover{background-color:#f07070;svg{color:white !important;}}.label_icon{display:flex;width:100%;height:100%;justify-content:center;align-items:center;cursor:pointer;}#modal_toggle_",e=>{let{idNum:t}=e;return t},"{display:none;}.modal_content,.modal_backdrop{height:0;width:0;opacity:0;visibility:hidden;overflow:hidden;cursor:pointer;transition:opacity 0.2s ease-in;}.modal_content{.modal_content_text{margin-top:2rem;text-align:center;font-size:18px;}.modal_close{color:#aaa;position:absolute;right:5px;top:5px;padding-top:3px;background:#fff;font-size:16px;width:25px;height:25px;font-weight:bold;text-align:center;cursor:pointer;&:hover{color:#333;}}.modal_content_btn{position:absolute;text-align:center;cursor:pointer;bottom:20px;right:30px;background:#446cb3;color:#fff;width:50px;border-radius:2px;font-size:14px;height:32px;padding-top:9px;font-weight:normal;&:hover{color:#fff;background:#365690;}}.ok_button{margin-right:75px;}}#modal_toggle_",e=>{let{idNum:t}=e;return t},".active ~ .modal_backdrop,#modal_toggle_",e=>{let{idNum:t}=e;return t},":checked ~ .modal_backdrop{background-color:rgba(0,0,0,0.6);width:100vw;height:100vh;position:fixed;left:0;top:0;z-index:9;visibility:visible;opacity:1;transition:opacity 0.2s ease-in;}#modal_toggle_",e=>{let{idNum:t}=e;return t},".active ~ .modal_content,#modal_toggle_",e=>{let{idNum:t}=e;return t},":checked ~ .modal_content{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);z-index:999;max-width:400px;width:300px;height:230px;padding:10px 30px;opacity:1;border-radius:4px;background-color:#fff;box-shadow:0 3px 7px rgba(0,0,0,0.6);cursor:auto;pointer-events:auto;visibility:visible;}")},8760:function(e,t,r){"use strict";r.d(t,{N:function(){return c}});var o=r(2164),n=r(6881),i=r(4903),a=r(7262),s=r(6494),l=r(6339),d=r(2472);function c(){let[,e]=(0,s.v$)(),[t,r]=(0,n.ZP)({key:"".concat(s.EE,"-loading"),initial:!0}),[c,,m]=(0,n.ZP)({key:s.EE,initial:null,persistor:{onSet:a.Z.onSet,onGet:async t=>{try{let t=await (0,d.L)(),r=a.Z.onGet(s.sB),o=await i.Z.get("/user/".concat(r.user_info.id,"/roomlist"),{headers:{Authorization:t.access_token}}),n=o.data.roomlist.map(e=>{let t=e.userlist.map(e=>({id:e.id,name:e.name}));return{...e,userlist:t}});return e(e=>({...e,roomList:n})),n}catch(e){if(window.navigator.onLine){if(e instanceof o.d7){var n,c;if((null===(n=e.response)||void 0===n?void 0:n.status)===401||(null===(c=e.response)||void 0===c?void 0:c.status)===403)console.error("Error: 올바른 요청이 아닙니다..다시시도 해주세요!");else throw new l.U7}else throw new l.U7}throw new l.F7}finally{r(!1)}}}}),{mutate:u,error:f}=m,g=async e=>{let{userlist:t,title:n}=e;try{r(!0);let e=await (0,d.L)();await i.Z.post("/room",{userlist:t,title:n},{headers:{Authorization:e.access_token}}),u(),alert("성공적으로 방을 생성하였습니다!"),r(!1)}catch(e){if(e instanceof o.d7){var a,s;(null===(a=e.response)||void 0===a?void 0:a.status)===401||(null===(s=e.response)||void 0===s?void 0:s.status)===403?alert("올바른 요청이 아닙니다..다시시도 해주세요!"):alert("방 생성에 실패했습니다..다시시도 해주세요!")}else throw new l.U7}},p=async e=>{try{r(!0);let t=await (0,d.L)(),o=a.Z.onGet(s.sB);await i.Z.delete("/user/".concat(o.user_info.id,"/room"),{headers:{Authorization:t.access_token},data:{delete_user_room_id:e}}),u(),alert("성공적으로 방에서 나갔습니다!"),r(!1)}catch(e){if(e instanceof o.d7){var t,n;(null===(t=e.response)||void 0===t?void 0:t.status)===401||(null===(n=e.response)||void 0===n?void 0:n.status)===403?alert("올바른 요청이 아닙니다..다시시도 해주세요!"):alert("방에서 나가지 못하였습니다..다시시도 해주세요!")}else throw new l.U7}},h=async(e,t)=>{try{r(!0);let o=await (0,d.L)();await i.Z.post("/room/".concat(e,"/user"),{invite_userlist:t},{headers:{Authorization:o.access_token}}),u(),alert("성공적으로 초대하였습니다!"),r(!1)}catch(e){if(e instanceof o.d7){var n,a,s;if((null===(n=e.response)||void 0===n?void 0:n.status)===401||(null===(a=e.response)||void 0===a?void 0:a.status)===403)alert("올바른 요청이 아닙니다..다시시도 해주세요!");else if((null===(s=e.response)||void 0===s?void 0:s.status)===402)alert("방이 존재하지 않습니다...다시시도 해주세요!");else throw new l.U7}else throw new l.U7}},b=async(e,t)=>{try{r(!0);let o=await (0,d.L)();await i.Z.delete("/room/".concat(e,"/user"),{headers:{Authorization:o.access_token},data:{delete_room_user_id:t}}),u(),alert("성공적으로 강퇴하였습니다!"),r(!1)}catch(e){if(e instanceof o.d7){var n,a,s;if((null===(n=e.response)||void 0===n?void 0:n.status)===401||(null===(a=e.response)||void 0===a?void 0:a.status)===403)alert("올바른 요청이 아닙니다..다시시도 해주세요!");else if((null===(s=e.response)||void 0===s?void 0:s.status)===402)alert("방이 존재하지 않습니다..다시시도 해주세요!");else throw new l.U7}else throw new l.U7}};return{data:c,isLoading:t,error:f,createRoom:g,exitRoom:p,inviteMemberToRoom:h,forceOutMember:b}}},4903:function(e,t,r){"use strict";var o=r(9222);let n=o.default.create({baseURL:"https://codakcodak.site/backapi"});t.Z=n},3787:function(e,t,r){"use strict";var o,n;r.d(t,{L:function(){return o}}),(n=o||(o={})).RoomMain="RoomMain",n.ImageRoom="ImageRoom",n.MyPage="MyPage"},6339:function(e,t,r){"use strict";r.d(t,{F7:function(){return o},U7:function(){return n}});class o extends Error{constructor(e="연결되 네트워크가 없습니다."){super(e),this.name="NetworkError"}}class n extends Error{constructor(e="예기치 못한 에러가 발생하였습니다..다시 시도해주세요."){super(e),this.name="unknownError"}}},7262:function(e,t){"use strict";t.Z={onSet(e,t){let r=JSON.stringify(t);localStorage.setItem(String(e),r)},onGet(e){var t;let r=null!==(t=localStorage.getItem(String(e)))&&void 0!==t?t:"null";try{return JSON.parse(r)}catch(e){return r}}}},6494:function(e,t,r){"use strict";r.d(t,{B1:function(){return i},EE:function(){return s},sB:function(){return a},v$:function(){return c},wy:function(){return l},zV:function(){return d},zW:function(){return m}});var o=r(6881),n=r(7262);let i="@user/token",a="@user/info",s="@user/room",l="@user/friend",d="@user/image",c=(0,o.MT)({key:a,initial:{loginState:"loading"},persistor:n.Z}),m=(0,o.MT)({key:"".concat(d,"-imagelist"),initial:null})},2472:function(e,t,r){"use strict";r.d(t,{L:function(){return s}});var o=r(9222),n=r(2164),i=r(7262),a=r(6494);let s=async()=>{try{let e=new Date,t=i.Z.onGet(a.B1),r=null==t?void 0:t.access_token,n=null==t?void 0:t.refresh_token,s=null==t?void 0:t.access_token_expire_time,l=null==t?void 0:t.refresh_token_expire_time;if(!s||!l||!r)return null;let d=new Date(s),c=d.getTime()-e.getTime(),m=new Date(l),u=m.getTime()-e.getTime();if(c>=3e4)return t;if(!(u>=3e4))return null;{let e=i.Z.onGet(a.sB),r=null==e?void 0:e.user_info.id,s=await o.default.post("/backapi/user/".concat(r,"/refresh"),{refresh_token:n}),l=s.data;return i.Z.onSet(a.B1,{...t,...l}),l}}catch(e){return e instanceof n.d7?console.error("Error: 사용자 권한을 갱신하지 못하였습니다..",e):console.error("Error: ",e),null}}},4271:function(e){e.exports={subtitle:"room_subtitle__jX2kf",card_wrapper:"room_card_wrapper__Mv_OV"}},4033:function(e,t,r){e.exports=r(8165)}},function(e){e.O(0,[2420,8447,1724,7311,6881,2164,4665,2971,596,1744],function(){return e(e.s=3922)}),_N_E=e.O()}]);
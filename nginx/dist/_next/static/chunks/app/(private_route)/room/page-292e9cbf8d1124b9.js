(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5439],{3922:function(e,t,r){Promise.resolve().then(r.bind(r,9983))},9983:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(7311),o=r(2265),i=r(4033),a=r(4606),l=r(8067),s=r(3787),c=r(1172),d=r(3159),u=r(1678),f=r(4616),p=r(8760);function h(e){let{roomId:t}=e,{exitRoom:r}=(0,p.N)();return(0,n.tZ)(f.Z,{id:t,icon:(0,n.tZ)(u.T$9,{}),title:"주의!",content:"정말 방에서 나가시겠습니까?",okHandler:()=>r(t)})}function m(e){let{roomData:t,index:r}=e,a=(0,i.useRouter)(),[l,s]=(0,o.useState)(!1),u=(0,o.useCallback)(e=>()=>{a.push("room/".concat(e))},[a]);return(0,n.tZ)(g,{accessBoxHover:l,children:(0,n.BX)("div",{className:"card_body",children:[(0,n.tZ)("div",{className:"card_num",children:r}),(0,n.BX)("div",{className:"main_info",onClick:u(t.id),onMouseOver:()=>s(!0),onMouseLeave:()=>s(!1),children:[(0,n.tZ)("div",{className:"title",children:t.title}),(0,n.BX)("div",{children:[t.userlist.slice(0,3).map(e=>(0,n.tZ)("span",{className:"member",children:e.name},e.id)),"..."]})]}),(0,n.tZ)("div",{className:"btn_group",children:(0,n.BX)(c.Pd.Provider,{value:{size:"22px",color:"rgba(0, 0, 0, 0.45)"},children:[(0,n.tZ)(h,{roomId:t.id}),(0,n.tZ)("div",{className:"invite_icon",onClick:()=>a.push("room/".concat(t.id,"/invite_member")),children:(0,n.tZ)(d.Bj$,{})})]})})]})})}let g=(0,l.Z)("div",{target:"e1vq9lw40"})("\r\n    position:relative;width:250px;border:1px solid #b8b9c9;border-radius:8px;background:#fff;transition:box-shadow 0.2s,border-color 0.2s;",e=>{let{accessBoxHover:t}=e;return t?"border-color: transparent; box-shadow: 0 1px 2px -2px rgba(0, 0, 0, 0.16), 0 3px 6px 0 rgba(0, 0, 0, 0.12), 0 5px 12px 4px rgba(0, 0, 0, 0.09);":""},"\r\n\r\n    .card_body{display:flex;align-items:center;height:90px;border-radius:8px;overflow:hidden;.card_num{width:30px;height:100%;line-height:90px;border-right:1px solid #f0f0f0;}.main_info{flex:1 0 auto;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;cursor:pointer;&:hover{background-color:#f8f8ff;}.title{margin-bottom:8px;font-weight:600;color:rgba(0,0,0,0.88);}.member{color:rgba(0,0,0,0.45);&:not(:last-child){margin-right:5px;}}}.btn_group{display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;width:50px;height:100%;border-left:1px solid #f0f0f0;.invite_icon{display:flex;justify-content:center;align-items:center;flex:1;width:100%;cursor:pointer;&:hover{background-color:#f0f0f0;}}}}");var v=r(6494),_=r(4271),b=r.n(_),x=r(1298);function w(){let[e,t]=(0,v.v$)(),{data:r,isLoading:l}=(0,p.N)(),c=(0,i.useRouter)();return((0,o.useEffect)(()=>{t(e=>({...e,currentPage:s.L.RoomMain,navigationTitle:"방 목록"}))},[t]),l||!r)?(0,n.tZ)(x.Z,{}):(0,n.BX)(y,{children:[(0,n.tZ)("div",{className:b().card_wrapper,children:0===r.length?(0,n.tZ)("div",{children:"등록된 방이 없습니다..."}):r.map((e,t)=>(0,n.tZ)(m,{roomData:e,index:t+1},e.id))}),(0,n.BX)(k,{onClick:()=>c.push("/room/create_room"),children:[(0,n.tZ)(a.O$v,{}),(0,n.tZ)("div",{children:"새로운 방 만들기"})]})]})}let y=(0,l.Z)("div",{target:"e1hok83u0"})("\r\n    display:flex;flex-direction:column;justify-content:space-between;align-items:center;min-height:100%;padding:50px;box-sizing:border-box;"),k=(0,l.Z)("div",{target:"e1hok83u1"})("\r\n    display:flex;flex-direction:column;align-items:center;justify-content:center;width:85%;max-width:800px;margin-top:3rem;gap:0.5rem;padding:1rem;box-sizing:border-box;user-select:none;cursor:pointer;border-radius:0.4rem;color:hsla(240,7%,70%,1);border:4px dashed hsla(240,7%,70%,0.35);&:hover{background-color:hsla(240,7%,70%,0.22);}svg{width:35px;height:35px;}")},1298:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(7311);r(2265);var o=r(8067),i=r(3633),a=r.n(i);function l(){return(0,n.tZ)(s,{children:(0,n.tZ)(a(),{type:"spinningBubbles",color:"black"})})}let s=(0,o.Z)("div",{target:"e164e7r10"})("\r\n    height:100%;display:flex;align-items:center;justify-content:center;")},4616:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(7311);r(2265);var o=r(8067);function i(e){let{id:t,icon:r,title:o,content:i,okHandler:l}=e;return(0,n.BX)(a,{idNum:t,children:[(0,n.tZ)("input",{id:"modal_toggle_".concat(t),type:"checkbox"}),(0,n.tZ)("label",{htmlFor:"modal_toggle_".concat(t),className:"label_icon",children:r}),(0,n.tZ)("label",{className:"modal_backdrop",htmlFor:"modal_toggle_".concat(t)}),(0,n.BX)("div",{className:"modal_content",children:[(0,n.tZ)("label",{className:"modal_close",htmlFor:"modal_toggle_".concat(t),children:"✕"}),(0,n.tZ)("h2",{children:o}),(0,n.tZ)("hr",{}),(0,n.tZ)("p",{className:"modal_content_text",children:i}),(0,n.tZ)("label",{className:"modal_content_btn ok_button",onClick:l,htmlFor:"modal_toggle_".concat(t),children:"확인"}),(0,n.tZ)("label",{className:"modal_content_btn",htmlFor:"modal_toggle_".concat(t),children:"취소"})]})]})}let a=(0,o.Z)("div",{target:"e9y1uwz0"})("\r\n    flex:1;display:flex;align-items:center;justify-content:center;width:100%;&:hover{background-color:#f07070;svg{color:white !important;}}.label_icon{display:flex;width:100%;height:100%;justify-content:center;align-items:center;cursor:pointer;}#modal_toggle_",e=>{let{idNum:t}=e;return t},"{display:none;}.modal_content,.modal_backdrop{height:0;width:0;opacity:0;visibility:hidden;overflow:hidden;cursor:pointer;transition:opacity 0.2s ease-in;}.modal_content{.modal_content_text{margin-top:2rem;text-align:center;font-size:18px;}.modal_close{color:#aaa;position:absolute;right:5px;top:5px;padding-top:3px;background:#fff;font-size:16px;width:25px;height:25px;font-weight:bold;text-align:center;cursor:pointer;&:hover{color:#333;}}.modal_content_btn{position:absolute;text-align:center;cursor:pointer;bottom:20px;right:30px;background:#446cb3;color:#fff;width:50px;border-radius:2px;font-size:14px;height:32px;padding-top:9px;font-weight:normal;&:hover{color:#fff;background:#365690;}}.ok_button{margin-right:75px;}}#modal_toggle_",e=>{let{idNum:t}=e;return t},".active ~ .modal_backdrop,#modal_toggle_",e=>{let{idNum:t}=e;return t},":checked ~ .modal_backdrop{background-color:rgba(0,0,0,0.6);width:100vw;height:100vh;position:fixed;left:0;top:0;z-index:9;visibility:visible;opacity:1;transition:opacity 0.2s ease-in;}#modal_toggle_",e=>{let{idNum:t}=e;return t},".active ~ .modal_content,#modal_toggle_",e=>{let{idNum:t}=e;return t},":checked ~ .modal_content{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);z-index:999;max-width:400px;width:300px;height:230px;padding:10px 30px;opacity:1;border-radius:4px;background-color:#fff;box-shadow:0 3px 7px rgba(0,0,0,0.6);cursor:auto;pointer-events:auto;visibility:visible;}")},8760:function(e,t,r){"use strict";r.d(t,{N:function(){return d}});var n=r(2164),o=r(6881),i=r(4903),a=r(7262),l=r(6494),s=r(6339),c=r(2472);function d(){let[,e]=(0,l.v$)(),[t,r]=(0,o.ZP)({key:"".concat(l.EE,"-loading"),initial:!0}),[d,,u]=(0,o.ZP)({key:l.EE,initial:null,persistor:{onSet:a.Z.onSet,onGet:async t=>{try{let t=await (0,c.L)(),r=a.Z.onGet(l.sB),n=await i.Z.get("/user/".concat(r.user_info.id,"/roomlist"),{headers:{Authorization:t.access_token}}),o=n.data.roomlist.map(e=>{let t=e.userlist.map(e=>({id:e.id,name:e.name}));return{...e,userlist:t}});return e(e=>({...e,roomList:o})),o}catch(e){if(window.navigator.onLine){if(e instanceof n.d7){var o,d;if((null===(o=e.response)||void 0===o?void 0:o.status)===401||(null===(d=e.response)||void 0===d?void 0:d.status)===403)console.error("Error: 올바른 요청이 아닙니다..다시시도 해주세요!");else throw new s.U7}else throw new s.U7}throw new s.F7}finally{r(!1)}}}}),{mutate:f,error:p}=u,h=async e=>{let{userlist:t,title:o}=e;try{r(!0);let e=await (0,c.L)();await i.Z.post("/room",{userlist:t,title:o},{headers:{Authorization:e.access_token}}),f(),alert("성공적으로 방을 생성하였습니다!"),r(!1)}catch(e){if(e instanceof n.d7){var a,l;(null===(a=e.response)||void 0===a?void 0:a.status)===401||(null===(l=e.response)||void 0===l?void 0:l.status)===403?alert("올바른 요청이 아닙니다..다시시도 해주세요!"):alert("방 생성에 실패했습니다..다시시도 해주세요!")}else throw new s.U7}},m=async e=>{try{r(!0);let t=await (0,c.L)(),n=a.Z.onGet(l.sB);await i.Z.delete("/user/".concat(n.user_info.id,"/room"),{headers:{Authorization:t.access_token},data:{delete_user_room_id:e}}),f(),alert("성공적으로 방에서 나갔습니다!"),r(!1)}catch(e){if(e instanceof n.d7){var t,o;(null===(t=e.response)||void 0===t?void 0:t.status)===401||(null===(o=e.response)||void 0===o?void 0:o.status)===403?alert("올바른 요청이 아닙니다..다시시도 해주세요!"):alert("방에서 나가지 못하였습니다..다시시도 해주세요!")}else throw new s.U7}},g=async(e,t)=>{try{r(!0);let n=await (0,c.L)();await i.Z.post("/room/".concat(e,"/user"),{invite_userlist:t},{headers:{Authorization:n.access_token}}),f(),alert("성공적으로 초대하였습니다!"),r(!1)}catch(e){if(e instanceof n.d7){var o,a,l;if((null===(o=e.response)||void 0===o?void 0:o.status)===401||(null===(a=e.response)||void 0===a?void 0:a.status)===403)alert("올바른 요청이 아닙니다..다시시도 해주세요!");else if((null===(l=e.response)||void 0===l?void 0:l.status)===402)alert("방이 존재하지 않습니다...다시시도 해주세요!");else throw new s.U7}else throw new s.U7}},v=async(e,t)=>{try{r(!0);let n=await (0,c.L)();await i.Z.delete("/room/".concat(e,"/user"),{headers:{Authorization:n.access_token},data:{delete_room_user_id:t}}),f(),alert("성공적으로 강퇴하였습니다!"),r(!1)}catch(e){if(e instanceof n.d7){var o,a,l;if((null===(o=e.response)||void 0===o?void 0:o.status)===401||(null===(a=e.response)||void 0===a?void 0:a.status)===403)alert("올바른 요청이 아닙니다..다시시도 해주세요!");else if((null===(l=e.response)||void 0===l?void 0:l.status)===402)alert("방이 존재하지 않습니다..다시시도 해주세요!");else throw new s.U7}else throw new s.U7}};return{data:d,isLoading:t,error:p,createRoom:h,exitRoom:m,inviteMemberToRoom:g,forceOutMember:v}}},4903:function(e,t,r){"use strict";var n=r(9222);let o=n.default.create({baseURL:"https://codakcodak.site/backapi"});t.Z=o},3787:function(e,t,r){"use strict";var n,o;r.d(t,{L:function(){return n}}),(o=n||(n={})).RoomMain="RoomMain",o.ImageRoom="ImageRoom",o.MyPage="MyPage"},6339:function(e,t,r){"use strict";r.d(t,{F7:function(){return n},U7:function(){return o}});class n extends Error{constructor(e="연결되 네트워크가 없습니다."){super(e),this.name="NetworkError"}}class o extends Error{constructor(e="예기치 못한 에러가 발생하였습니다..다시 시도해주세요."){super(e),this.name="unknownError"}}},7262:function(e,t){"use strict";t.Z={onSet(e,t){let r=JSON.stringify(t);localStorage.setItem(String(e),r)},onGet(e){var t;let r=null!==(t=localStorage.getItem(String(e)))&&void 0!==t?t:"null";try{return JSON.parse(r)}catch(e){return r}}}},6494:function(e,t,r){"use strict";r.d(t,{B1:function(){return i},EE:function(){return l},sB:function(){return a},v$:function(){return d},wy:function(){return s},zV:function(){return c},zW:function(){return u}});var n=r(6881),o=r(7262);let i="@user/token",a="@user/info",l="@user/room",s="@user/friend",c="@user/image",d=(0,n.MT)({key:a,initial:{loginState:"loading"},persistor:o.Z}),u=(0,n.MT)({key:"".concat(c,"-imagelist"),initial:null})},2472:function(e,t,r){"use strict";r.d(t,{L:function(){return l}});var n=r(9222),o=r(2164),i=r(7262),a=r(6494);let l=async()=>{try{let e=new Date,t=i.Z.onGet(a.B1),r=null==t?void 0:t.access_token,o=null==t?void 0:t.refresh_token,l=null==t?void 0:t.access_token_expire_time,s=null==t?void 0:t.refresh_token_expire_time;if(!l||!s||!r)return null;let c=new Date(l),d=c.getTime()-e.getTime(),u=new Date(s),f=u.getTime()-e.getTime();if(d>=3e4)return t;if(!(f>=3e4))return null;{let e=i.Z.onGet(a.sB),r=null==e?void 0:e.user_info.id,l=await n.default.post("/backapi/user/".concat(r,"/refresh"),{refresh_token:o}),s=l.data;return i.Z.onSet(a.B1,{...t,...s}),s}}catch(e){return e instanceof o.d7?console.error("Error: 사용자 권한을 갱신하지 못하였습니다..",e):console.error("Error: ",e),null}}},4271:function(e){e.exports={subtitle:"room_subtitle__jX2kf",card_wrapper:"room_card_wrapper__Mv_OV"}},4033:function(e,t,r){e.exports=r(8165)},1172:function(e,t,r){"use strict";r.d(t,{w_:function(){return s},Pd:function(){return i}});var n=r(2265),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i=n.createContext&&n.createContext(o),a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)0>t.indexOf(n[o])&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};function s(e){return function(t){return n.createElement(c,a({attr:a({},e.attr)},t),function e(t){return t&&t.map(function(t,r){return n.createElement(t.tag,a({key:r},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var r,o=e.attr,i=e.size,s=e.title,c=l(e,["attr","size","title"]),d=i||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,c,{className:r,style:a(a({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),s&&n.createElement("title",null,s),e.children)};return void 0!==i?n.createElement(i.Consumer,null,function(e){return t(e)}):t(o)}}},function(e){e.O(0,[2420,8447,1724,7311,6881,2164,3852,2971,596,1744],function(){return e(e.s=3922)}),_N_E=e.O()}]);
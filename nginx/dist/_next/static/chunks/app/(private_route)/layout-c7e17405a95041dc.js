(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4234],{4994:function(e,t,r){Promise.resolve().then(r.bind(r,2224))},2224:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return M}});var n,o=r(7311),i=r(2265),a=r(7263),s=r(9150),l=r(8067),d=r(1172),c=r(3159),u=r(4033),m=r(1691),g=r(7267),h=r(8574),p=r(4606),f=r(8920),v=r(6820),w=r(3787),b=r(6494),k=r(452),x=r(8131),y=r.n(x);function _(){var e;let[t,r]=(0,b.v$)(),n=(0,u.useRouter)(),a=(0,u.usePathname)(),[s,l]=(0,i.useState)(!1),x=(null==t?void 0:t.currentPage)===w.L.RoomMain,_=async()=>{await r({loginState:"logout"}),(0,k.RN)()};return(0,o.tZ)(Z,{children:(0,o.BX)(d.Pd.Provider,{value:{size:"16px"},children:[(0,o.tZ)(z,{children:(0,o.BX)("button",{className:"left_btn",onClick:x?()=>{n.push("/room/create_room")}:()=>n.push("/room"),children:[(0,o.tZ)("div",{className:"list_icon",children:x?(0,o.tZ)(p.O$v,{}):(0,o.tZ)(g.eSk,{})}),(0,o.tZ)("div",{className:"list_text",children:x?"방 생성하기":"방 목록으로 이동"})]})}),(0,o.tZ)("h2",{className:y().className,children:null==t?void 0:t.navigationTitle}),(0,o.BX)(N,{children:[(null==t?void 0:t.currentPage)===w.L.ImageRoom&&(0,o.BX)(o.HY,{children:[(0,o.tZ)("div",{className:"upload_icon icon_d",onClick:()=>n.push(a+"/upload_image"),children:(0,o.tZ)(v.AM0,{})}),(0,o.tZ)("div",{className:"invite_icon icon_d",onClick:()=>n.push(a+"/invite_member"),children:(0,o.tZ)(f.zy7,{})})]}),(0,o.tZ)("div",{className:"user_name",children:null==t?void 0:null===(e=t.user_info)||void 0===e?void 0:e.name}),(0,o.tZ)("div",{className:"user_icon icon_d",onClick:()=>l(e=>!e),children:(0,o.tZ)(c.BKo,{})}),s&&(0,o.BX)(o.HY,{children:[(0,o.tZ)("div",{className:"backdrop",onClick:()=>l(!1)}),(0,o.BX)("div",{className:"user_icon_menu",children:[(0,o.BX)("div",{className:"menu_item",onClick:()=>{l(!1),n.push("/my_page")},children:[(0,o.tZ)(h.l3d,{}),(0,o.tZ)("span",{className:"text",children:"마이페이지"})]}),(0,o.BX)("div",{className:"menu_item logout",onClick:_,children:[(0,o.tZ)(m.u43,{}),(0,o.tZ)("span",{className:"text",children:"로그아웃"})]})]})]})]})]})})}let Z=(0,l.Z)("nav",{target:"e18syg5z0"})("\r\n    display:flex;justify-content:space-between;align-items:center;padding:0 1.5rem;height:50px;border-bottom:1px solid hsl(210,8%,85%);box-sizing:border-box;h2{margin:0;white-space:nowrap;}ul{padding:0;margin:0;list-style:none;a{text-decoration:none;}}"),z=(0,l.Z)("div",{target:"e18syg5z1"})("\r\n    display:flex;.create_room_btn{padding:7px;border-radius:50%;background-color:lightgray;cursor:pointer;&:hover{background-color:darkgray;}}.left_btn{position:relative;display:inline-flex;justify-content:center;align-items:center;padding:7px;vertical-align:middle;overflow:hidden;text-decoration:none;white-space:nowrap;user-select:none;background:none;background-color:hsla(240,7%,70%,0.22);color:#0e0e10;font-weight:600;border:none;border-radius:0.4rem;cursor:pointer;&:hover{background-color:hsla(240,7%,70%,0.35);}.list_icon{line-height:0;margin-right:3px;}@media screen and (max-width:700px){svg{width:20px;height:20px;}.list_icon{margin:0;}.list_text{position:absolute;width:1px;height:1px;clip-path:polygon(0 0,0 0,0 0,0 0);overflow:hidden;}}}"),N=(0,l.Z)("div",{target:"e18syg5z2"})("\r\n    display:flex;align-items:center;.icon_d{display:inline-block;margin-left:auto;margin-right:15px;padding:7px;border-radius:50%;background-color:lightgray;cursor:pointer;&:hover{background-color:darkgray;}}.user_name{margin:0 1rem;white-space:nowrap;}.backdrop{width:100vw;height:100vh;position:fixed;left:0;top:0;z-index:9;visibility:visible;}.user_icon_menu{position:absolute;top:44px;right:20px;z-index:10;width:140px;text-align:center;border-radius:8px;box-shadow:0px 1px 1px 1px rgba(0,0,0,0.2);background-color:white;overflow:hidden;.menu_item{padding:12px;cursor:pointer;&:hover{background-color:#e6e6e6;}&:not(:last-child){border-bottom:1px solid #f2f2f2;}.text{margin-left:3px;}}.menu_item.logout{&:hover{color:white;background-color:#f07070;}}}");var B=r(1396),S=r.n(B),E=r(8760);function L(e){let{show:t}=e,r=(0,u.usePathname)(),{data:n}=(0,E.N)();return n?(0,o.BX)(o.HY,{children:[(0,o.tZ)("h3",{children:"방 목록"}),(0,o.tZ)(a.ZP,{children:(0,o.tZ)(P,{show:t,children:n.map(e=>{let t=r==="/room/".concat(e.id);return(0,o.tZ)(S(),{href:"/room/".concat(e.id),children:(0,o.tZ)("div",{className:"link_item ".concat(t?"active":""),children:e.title})},e.id)})})})]}):(0,o.tZ)("div",{children:"로딩중..."})}let P=(0,l.Z)("div",{target:"e1khsrg0"})("\r\n    display:flex;flex-direction:column;position:relative;gap:1rem;padding:0 1rem;margin-top:10px;transition:opacity 0s 0.2s;",e=>{let{show:t}=e;return!t&&"\n    transition-delay: 0.1s;\n    opacity: 0;\n    "},"\r\n\r\n    a{text-decoration:none;}.link_item{display:block;height:35px;line-height:35px;text-align:center;border-radius:5px;color:rgb(255,255,255,0.7);&.active,&:hover{background-color:#0058aa;}}");function R(e){let{show:t}=e,r=(0,u.usePathname)();return(0,o.BX)(X,{show:t,children:[(0,o.tZ)(S(),{href:"/my_page",children:(0,o.tZ)("div",{className:"link_item ".concat("/my_page"===r?"active":""),children:"프로필"})}),(0,o.tZ)(S(),{href:"/my_page/friends",children:(0,o.tZ)("div",{className:"link_item ".concat("/my_page/friends"===r?"active":""),children:"친구 목록"})}),(0,o.tZ)(S(),{href:"/my_page/my_picture",children:(0,o.tZ)("div",{className:"link_item ".concat("/my_page/my_picture"===r?"active":""),children:"저장된 사진들"})}),(0,o.tZ)(S(),{href:"/my_page/search",children:(0,o.tZ)("div",{className:"link_item ".concat("/my_page/search"===r?"active":""),children:"유저 검색"})})]})}let X=(0,l.Z)("div",{target:"emngarg0"})("\r\n    display:flex;flex-direction:column;position:relative;gap:1rem;padding:0 1rem;margin-top:60px;transition:opacity 0s 0.2s;",e=>{let{show:t}=e;return!t&&"\n    transition-delay: 0.1s;\n    opacity: 0;\n    "},"\r\n\r\n    a{text-decoration:none;}.link_item{display:block;height:35px;line-height:35px;text-align:center;border-radius:5px;color:rgb(255,255,255,0.7);&.active,&:hover{background-color:#0058aa;}}");function C(e){let{show:t,setLeftMenu:r}=e,[n]=(0,b.v$)(),a=(0,i.useCallback)(()=>r(!1),[r]);return(0,o.BX)(A,{show:t,children:[t&&(0,o.tZ)("div",{className:"close_icon",onClick:a,children:(0,o.tZ)(v.zrf,{})}),(null==n?void 0:n.currentPage)===w.L.ImageRoom?(0,o.tZ)(L,{show:t}):(0,o.tZ)(R,{show:t})]})}let A=(0,l.Z)("div",{target:"e189arda0"})("\r\n    position:relative;display:flex;flex-direction:column;width:200px;height:100%;padding:40px 0;box-sizing:border-box;transition:width 0.5s,opacity 0.4s;background-color:#99aebb;text-align:center;",e=>{let{show:t}=e;return!t&&"\n    width: 0;\n    opacity: 0;\n    "},"\r\n\r\n    .close_icon{position:absolute;z-index:1;right:10px;top:10px;padding:7px;border-radius:50%;background-color:lightgray;cursor:pointer;&:hover{background-color:darkgray;}}@media screen and (max-width:460px){position:absolute;z-index:10;}");var I=r(1298),M=(n=e=>{let{children:t,modal:r}=e,[n]=(0,b.v$)(),[l,d]=(0,i.useState)(!1);return(0,o.BX)("div",{style:{height:"inherit"},children:[(0,o.tZ)(_,{}),(0,o.BX)(U,{children:[(null==n?void 0:n.currentPage)!==w.L.RoomMain&&(0,o.tZ)(C,{show:l,setLeftMenu:d}),(0,o.BX)("main",{style:{flex:"1 0 auto",position:"relative"},children:[(null==n?void 0:n.currentPage)!==w.L.RoomMain&&!l&&(0,o.tZ)($,{onClick:()=>d(e=>!e),children:(0,o.tZ)(s.n5H,{})}),(0,o.tZ)(a.$B,{children:t})]})]}),r]})},e=>{let[t,r]=(0,b.v$)(),a=async()=>{let e=await (0,k.wt)();e?await r(t=>({...t,loginState:"login",user_info:{...e}})):await r(e=>({...e,loginState:"logout"}))};return((0,i.useEffect)(()=>{a()},[]),"logout"===t.loginState)?((0,k.RN)(),(0,u.redirect)("/login")):"loading"===t.loginState?(0,o.tZ)(I.Z,{}):(0,o.tZ)(n,{...e})});let U=(0,l.Z)("div",{target:"e1hevgz80"})("\r\n    display:flex;height:calc(100% - 50px);"),$=(0,l.Z)("div",{target:"e1hevgz81"})("\r\n    position:absolute;z-index:1;left:20px;top:10px;padding:7px;border-radius:50%;background-color:lightgray;cursor:pointer;&:hover{background-color:darkgray;}")},1298:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(7311);r(2265);var o=r(8067);function i(){return(0,n.tZ)(a,{children:"Loading…"})}let a=(0,o.Z)("div",{target:"ega6p8c0"})('\r\n    position:fixed;z-index:999;height:2em;width:2em;overflow:visible;margin:auto;top:0;left:0;bottom:0;right:0;&:before{content:"";display:block;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.3);}&:not(:required){/* hide "loading..." text */\r\n        font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0;}&:not(:required):after{content:"";display:block;font-size:10px;width:1em;height:1em;margin-top:-0.5em;-webkit-animation:spinner 1500ms infinite linear;-moz-animation:spinner 1500ms infinite linear;-ms-animation:spinner 1500ms infinite linear;-o-animation:spinner 1500ms infinite linear;animation:spinner 1500ms infinite linear;border-radius:0.5em;-webkit-box-shadow:rgba(0,0,0,0.75) 1.5em 0 0 0,rgba(0,0,0,0.75) 1.1em 1.1em 0 0,rgba(0,0,0,0.75) 0 1.5em 0 0,rgba(0,0,0,0.75) -1.1em 1.1em 0 0,rgba(0,0,0,0.5) -1.5em 0 0 0,rgba(0,0,0,0.5) -1.1em -1.1em 0 0,rgba(0,0,0,0.75) 0 -1.5em 0 0,rgba(0,0,0,0.75) 1.1em -1.1em 0 0;box-shadow:rgba(0,0,0,0.75) 1.5em 0 0 0,rgba(0,0,0,0.75) 1.1em 1.1em 0 0,rgba(0,0,0,0.75) 0 1.5em 0 0,rgba(0,0,0,0.75) -1.1em 1.1em 0 0,rgba(0,0,0,0.75) -1.5em 0 0 0,rgba(0,0,0,0.75) -1.1em -1.1em 0 0,rgba(0,0,0,0.75) 0 -1.5em 0 0,rgba(0,0,0,0.75) 1.1em -1.1em 0 0;}/* Animation */\r\n\r\n    @-webkit-keyframes spinner{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg);}}@-moz-keyframes spinner{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg);}}@-o-keyframes spinner{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg);}}@keyframes spinner{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg);}}')},8760:function(e,t,r){"use strict";r.d(t,{N:function(){return c}});var n=r(2164),o=r(6881),i=r(4903),a=r(7262),s=r(6494),l=r(6339),d=r(2472);function c(){let[,e]=(0,s.v$)(),[t,r]=(0,o.ZP)({key:"".concat(s.EE,"-loading"),initial:!0}),[c,,u]=(0,o.ZP)({key:s.EE,initial:null,persistor:{onSet:a.Z.onSet,onGet:async t=>{try{let t=await (0,d.L)(),r=a.Z.onGet(s.sB),n=await i.Z.get("/user/".concat(r.user_info.id,"/roomlist"),{headers:{Authorization:t.access_token}}),o=n.data.roomlist.map(e=>{let t=e.userlist.map(e=>({id:e.id,name:e.name}));return{...e,userlist:t}});return e(e=>({...e,roomList:o})),o}catch(e){if(window.navigator.onLine){if(e instanceof n.d7){var o,c;if((null===(o=e.response)||void 0===o?void 0:o.status)===401||(null===(c=e.response)||void 0===c?void 0:c.status)===403)console.error("Error: 올바른 요청이 아닙니다..다시시도 해주세요!");else throw new l.U7}else throw new l.U7}throw new l.F7}finally{r(!1)}}}}),{mutate:m,error:g}=u,h=async e=>{let{userlist:t,title:o}=e;try{r(!0);let e=await (0,d.L)();await i.Z.post("/room",{userlist:t,title:o},{headers:{Authorization:e.access_token}}),m(),alert("성공적으로 방을 생성하였습니다!"),r(!1)}catch(e){if(e instanceof n.d7){var a,s;(null===(a=e.response)||void 0===a?void 0:a.status)===401||(null===(s=e.response)||void 0===s?void 0:s.status)===403?alert("올바른 요청이 아닙니다..다시시도 해주세요!"):alert("방 생성에 실패했습니다..다시시도 해주세요!")}else throw new l.U7}},p=async e=>{try{r(!0);let t=await (0,d.L)(),n=a.Z.onGet(s.sB);await i.Z.delete("/user/".concat(n.user_info.id,"/room"),{headers:{Authorization:t.access_token},data:{delete_user_room_id:e}}),m(),alert("성공적으로 방에서 나갔습니다!"),r(!1)}catch(e){if(e instanceof n.d7){var t,o;(null===(t=e.response)||void 0===t?void 0:t.status)===401||(null===(o=e.response)||void 0===o?void 0:o.status)===403?alert("올바른 요청이 아닙니다..다시시도 해주세요!"):alert("방에서 나가지 못하였습니다..다시시도 해주세요!")}else throw new l.U7}},f=async(e,t)=>{try{r(!0);let n=await (0,d.L)();await i.Z.post("/room/".concat(e,"/user"),{invite_userlist:t},{headers:{Authorization:n.access_token}}),m(),alert("성공적으로 초대하였습니다!"),r(!1)}catch(e){if(e instanceof n.d7){var o,a,s;if((null===(o=e.response)||void 0===o?void 0:o.status)===401||(null===(a=e.response)||void 0===a?void 0:a.status)===403)alert("올바른 요청이 아닙니다..다시시도 해주세요!");else if((null===(s=e.response)||void 0===s?void 0:s.status)===402)alert("방이 존재하지 않습니다...다시시도 해주세요!");else throw new l.U7}else throw new l.U7}},v=async(e,t)=>{try{r(!0);let n=await (0,d.L)();await i.Z.delete("/room/".concat(e,"/user"),{headers:{Authorization:n.access_token},data:{delete_room_user_id:t}}),m(),alert("성공적으로 강퇴하였습니다!"),r(!1)}catch(e){if(e instanceof n.d7){var o,a,s;if((null===(o=e.response)||void 0===o?void 0:o.status)===401||(null===(a=e.response)||void 0===a?void 0:a.status)===403)alert("올바른 요청이 아닙니다..다시시도 해주세요!");else if((null===(s=e.response)||void 0===s?void 0:s.status)===402)alert("방이 존재하지 않습니다..다시시도 해주세요!");else throw new l.U7}else throw new l.U7}};return{data:c,isLoading:t,error:g,createRoom:h,exitRoom:p,inviteMemberToRoom:f,forceOutMember:v}}},4903:function(e,t,r){"use strict";var n=r(9222);let o=n.default.create({baseURL:"https://codakcodak.site/backapi"});t.Z=o},3787:function(e,t,r){"use strict";var n,o;r.d(t,{L:function(){return n}}),(o=n||(n={})).RoomMain="RoomMain",o.ImageRoom="ImageRoom",o.MyPage="MyPage"},6339:function(e,t,r){"use strict";r.d(t,{F7:function(){return n},U7:function(){return o}});class n extends Error{constructor(e="연결되 네트워크가 없습니다."){super(e),this.name="NetworkError"}}class o extends Error{constructor(e="예기치 못한 에러가 발생하였습니다..다시 시도해주세요."){super(e),this.name="unknownError"}}},7262:function(e,t){"use strict";t.Z={onSet(e,t){let r=JSON.stringify(t);localStorage.setItem(String(e),r)},onGet(e){var t;let r=null!==(t=localStorage.getItem(String(e)))&&void 0!==t?t:"null";try{return JSON.parse(r)}catch(e){return r}}}},6494:function(e,t,r){"use strict";r.d(t,{B1:function(){return i},EE:function(){return s},sB:function(){return a},v$:function(){return c},wy:function(){return l},zV:function(){return d},zW:function(){return u}});var n=r(6881),o=r(7262);let i="@user/token",a="@user/info",s="@user/room",l="@user/friend",d="@user/image",c=(0,n.MT)({key:a,initial:{loginState:"loading"},persistor:o.Z}),u=(0,n.MT)({key:"".concat(d,"-imagelist"),initial:null})},2472:function(e,t,r){"use strict";r.d(t,{L:function(){return s}});var n=r(9222),o=r(2164),i=r(7262),a=r(6494);let s=async()=>{try{let e=new Date,t=i.Z.onGet(a.B1),r=null==t?void 0:t.access_token,o=null==t?void 0:t.refresh_token,s=null==t?void 0:t.access_token_expire_time,l=null==t?void 0:t.refresh_token_expire_time;if(!s||!l||!r)return null;let d=new Date(s),c=d.getTime()-e.getTime(),u=new Date(l),m=u.getTime()-e.getTime();if(c>=3e4)return t;if(!(m>=3e4))return null;{let e=i.Z.onGet(a.sB),r=null==e?void 0:e.user_info.id,s=await n.default.post("/backapi/user/".concat(r,"/refresh"),{refresh_token:o}),l=s.data;return i.Z.onSet(a.B1,{...t,...l}),l}}catch(e){return e instanceof o.d7?console.error("Error: 사용자 권한을 갱신하지 못하였습니다..",e):console.error("Error: ",e),null}}},452:function(e,t,r){"use strict";r.d(t,{R5:function(){return d},RN:function(){return c},eu:function(){return u},wt:function(){return m},x4:function(){return l}});var n=r(7262),o=r(6494),i=r(2164),a=r(4903),s=r(2472);let l=async e=>{let{email:t,password:r}=e;try{let e=await a.Z.post("/user/login",{email:t,password:r}),i=e.data;return n.Z.onSet(o.B1,i),!0}catch(e){if(e instanceof i.d7){var s,l,d;(null===(s=e.response)||void 0===s?void 0:s.status)===401||(null===(l=e.response)||void 0===l?void 0:l.status)===404?alert(null===(d=e.response)||void 0===d?void 0:d.data.message):alert("서버 문제로 잠시 후에 다시 시도 해주세요.")}else alert("예기치 못한 에러가 발생하였습니다..다시 시도해주세요.")}},d=async(e,t)=>{try{let r=await a.Z.get("/oauth-login/callback?coperation=".concat(e,"&code=").concat(t)),{user_id:i,...s}=r.data,l=await a.Z.get("/user/my",{headers:{Authorization:null==s?void 0:s.access_token}});n.Z.onSet(o.B1,s);let d=l.data.user_info;return d}catch(e){e instanceof i.d7?alert("서버 문제로 잠시 후에 다시 시도 해주세요."):alert("예기치 못한 에러가 발생하였습니다..다시 시도해주세요.");return}},c=()=>{window.localStorage.removeItem(o.sB),window.localStorage.removeItem(o.B1),window.localStorage.removeItem(o.EE),window.localStorage.removeItem(o.wy),window.localStorage.removeItem(o.zV)},u=async e=>{var t;try{let t=await (0,s.L)(),r=await a.Z.post("/user/my",{name:e},{headers:{Authorization:null==t?void 0:t.access_token}});return alert("성공적으로 변경하였습니다!"),r.data}catch(e){e instanceof i.d7?(null===(t=e.response)||void 0===t?void 0:t.status)===401?alert("사용자 권한이 없습니다..로그아웃 후 시도해주세요."):alert("서버 문제로 잠시 후에 다시 시도 해주세요."):alert("예기치 못한 에러가 발생하였습니다..다시 시도해주세요.")}},m=async()=>{var e;try{let e=await (0,s.L)();if(!e)throw Error();let t=await a.Z.get("/user/my",{headers:{Authorization:null==e?void 0:e.access_token}});return t.data.user_info}catch(t){return t instanceof i.d7&&((null===(e=t.response)||void 0===e?void 0:e.status)===401?console.error("Auth Error: ",t):console.error("Server Error: ",t)),null}}}},function(e){e.O(0,[2420,6115,3712,8447,2222,5104,2636,7311,6881,2164,1453,1396,9147,2971,596,1744],function(){return e(e.s=4994)}),_N_E=e.O()}]);